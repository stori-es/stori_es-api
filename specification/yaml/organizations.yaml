apiVersion: 1
swaggerVersion: 1.2
basePath: 'http://www.stori.es/api/listings'
description: 'Operations for organizations'
resourcePath: '/organizations'
produces:
  - 'application/json'
consumes:
  - 'application/json'
apis:
  -
    path: '/organizations'
    operations:          
      -
        method: 'POST'
        summary: 'Create a new organization'
        notes: 'Creates a new organization and returns it. Declares the resource URL in the Location header.'
        type: 'Organization'
        nickname: 'create_organization'
        parameters:
          -
            name: 'body'
            description: 'The new organization to be created'
            required: true
            type: 'Organization'
            paramType: 'body'
        responseMessages:
          -
            code: 201
            message: 'Resource successfully created'
            responseModel: 'Organization'
          -
            code: 400
            message: 'Invalid input'
            responseModel: 'Error'
          -
            code: 403
            message: 'Not authorized to create the requested resource'
            responseModel: 'Error'
          -
            code: 503
            message: 'Service is currently unavailable'
            responseModel: 'Error'
  -
    path: '/organizations/{organization_id}'
    operations:
      -
        method: 'GET'
        summary: 'Retrieve a specific organization'
        notes: 'Returns a specific organization accessible to the current user'
        type: 'Organization'
        nickname: 'get_organization'
        parameters:
          -
            name: 'organization_id'
            description: 'The ID of the organization to retrieve'
            required: true
            type: 'integer'
            format: 'int64'
            paramType: 'path'
        responseMessages:
          -
            code: 200
            message: 'Resource successfully retrieved'
            responseModel: 'Organization'
          -
            code: 403
            message: 'Not authorized to access the requested resource'
            responseModel: 'Error'
          -
            code: 404
            message: 'Resource not found'
            responseModel: 'Error'
          -
            code: 503
            message: 'Service is currently unavailable'
            responseModel: 'Error'
      -
        method: 'DELETE'
        summary: 'Deletes an organization'
        notes: 'Deletes an organization owned by the current user'
        type: 'void'
        nickname: 'delete_organization'
        parameters:
          -
            name: 'organization_id'
            description: 'The ID of the organization to delete'
            required: true
            type: 'integer'
            format: 'int64'
            paramType: 'path'
        responseMessages:
          -
            code: 204
            message: 'Resource successfully deleted'
          -
            code: 403
            message: 'Not authorized to delete the requested resource'
            responseModel: 'Error'
          -
            code: 404
            message: 'Resource not found'
            responseModel: 'Error'
          -
            code: 503
            message: 'Service is currently unavailable'
            responseModel: 'Error'
      -
        method: 'PATCH'
        summary: 'Updates an organization'
        notes: 'Updates an organization administered by the current user'
        type: 'Organization'
        nickname: 'update_organization'
        parameters:
          -
            name: 'organization_id'
            description: 'The ID of the organization to update'
            required: true
            type: 'integer'
            format: 'int64'
            paramType: 'path'
          -
            name: 'body'
            description: 'The updated organization'
            required: true
            type: 'Organization'
            paramType: 'body'
        responseMessages:
          -
            code: 200
            message: 'Resource successfully updated'
            responseModel: 'Organization'
          -
            code: 400
            message: 'Invalid input'
            responseModel: 'Error'
          -
            code: 403
            message: 'Not authorized to update the requested resource'
            responseModel: 'Error'
          -
            code: 404
            message: 'Resource not found'
            responseModel: 'Error'
          -
            code: 503
            message: 'Service is currently unavailable'
            responseModel: 'Error'
models:
  Organization:
    id: 'Organization'
    description: 'The representation of an organization on the stori.es platform'
    required:
       - 'id'
       - 'title'
    properties:
      id:
        type: 'string'
        description: 'The unique ID for this entity'
      title:
        type: 'string'
        description: 'The title of this entity'
      path:
        type: 'string'
        description: 'The URL path fragment associated with this entity; its namespace'
      permalink:
        type: 'string'
        description: 'The URL of this entity on the stori.es platform'
      default_theme_id:
        type: 'integer'
        format: 'int64'
        description: 'The ID of the default theme for this entity'
        minimum: 1
        defaultValue: 1
      note_ids:
        type: 'array'
        description: 'The IDs of notes associated with this entity'
        items: 
          type: 'integer'
          format: 'int64'
      link_ids:
        type: 'array'
        description: 'The IDs of links associated with this entity'
        items: 
          type: 'integer'
          format: 'int64'
      permission_ids:
        type: 'array'
        description: 'The IDs of permission documents associated with this entity'
        items: 
          type: 'integer'
          format: 'int64'
  Error:
    id: 'Error'
    description: 'The representation of a stori.es API error'
    required:
       - 'http_status_code'
       - 'error_code'
       - 'summary'
    properties:
      http_status_code:
        type: 'integer'
        format: 'int64'
        description: 'The HTTP status code'
      error_code:
        type: 'string'
        description: 'The stori.es internal error code'
      summary:
        type: 'string'
        description: 'A brief summary of the error encountered'
      detail_url:
        type: 'string'
        description: 'A URL for developers containing more detail about the error'