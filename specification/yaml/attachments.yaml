apiVersion: 1
swaggerVersion: 1.2
basePath: 'http://www.stori.es/api/website/listings'
description: 'links to resources'
resourcePath: '/attachments'
produces:
  - 'application/vnd.api+json'
consumes:
  - 'application/vnd.api+json'
apis:
  -
    path: '/links'
    operations:
      -
        method: 'POST'
        summary: 'Create a new link'
        notes: 'Creates a new attachment document and returns it. Declares the resource URL in the <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30" title="HTTP 1.1 Header Fields - Location">HTTP Location header</a>.'
        type: 'ApiResponse'
        nickname: 'create_link'
        parameters:
          -
            name: 'body'
            description: 'The new link to be created'
            required: true
            type: 'LinkPost'
            paramType: 'body'
        responseMessages:
          -
            code: 201
            message: 'Resource successfully created'
            responseModel: 'ApiResponse'
          -
            code: 400
            message: 'Invalid input'
            responseModel: 'ApiResponse'
          -
            code: 403
            message: 'Not authorized to create the requested resource'
            responseModel: 'ApiResponse'
          -
            code: 503
            message: 'Service is currently unavailable'
            responseModel: 'ApiResponse'
  -
    path: '/links/{link_id}'
    operations:
      -
        method: 'GET'
        summary: 'Retrieve a specific link'
        notes: 'Returns a specific link accessible to the current user'
        type: 'ApiResponse'
        nickname: 'get_link'
        parameters:
          -
            name: 'link_id'
            description: 'The ID of the link to retrieve'
            required: true
            type: 'string'
            paramType: 'path'
        responseMessages:
          -
            code: 200
            message: 'Resource successfully retrieved'
            responseModel: 'ApiResponse'
          -
            code: 403
            message: 'Not authorized to access the requested resource'
            responseModel: 'ApiResponse'
          -
            code: 404
            message: 'Resource not found'
            responseModel: 'ApiResponse'
          -
            code: 503
            message: 'Service is currently unavailable'
            responseModel: 'ApiResponse'
      -
        method: 'DELETE'
        summary: 'Deletes a link'
        notes: 'Deletes a link owned by the current user'
        type: 'void'
        nickname: 'delete_link'
        parameters:
          -
            name: 'link_id'
            description: 'The ID of the link to delete'
            required: true
            type: 'string'
            paramType: 'path'
        responseMessages:
          -
            code: 204
            message: 'Resource successfully deleted'
          -
            code: 403
            message: 'Not authorized to delete the requested resource'
            responseModel: 'ApiResponse'
          -
            code: 404
            message: 'Resource not found'
            responseModel: 'ApiResponse'
          -
            code: 503
            message: 'Service is currently unavailable'
            responseModel: 'ApiResponse'
      -
        method: 'PATCH'
        summary: 'Updates a link'
        notes: 'Updates a link administered by the current user'
        type: 'ApiResponse'
        nickname: 'update_link'
        consumes:
          - 'application/json-patch+json'
        parameters:
          -
            name: 'link_id'
            description: 'The ID of the link to update'
            required: true
            type: 'string'
            paramType: 'path'
          -
            name: 'body'
            description: 'Requested modifications in JSON Patch format (see <a href="http://tools.ietf.org/html/rfc6902" title="RFC6902 - JSON Patch">RFC6902</a> and <a href="http://jsonapi.org/format/#updating-a-document" title="JSON API - Updating a Document (PATCH)">JSON API</a>)'
            required: true
            type: 'PatchOperations'
            paramType: 'body'
        responseMessages:
          -
            code: 200
            message: 'Resource successfully updated'
            responseModel: 'ApiResponse'
          -
            code: 400
            message: 'Invalid input'
            responseModel: 'ApiResponse'
          -
            code: 403
            message: 'Not authorized to update the requested resource'
            responseModel: 'ApiResponse'
          -
            code: 404
            message: 'Resource not found'
            responseModel: 'ApiResponse'
          -
            code: 503
            message: 'Service is currently unavailable'
            responseModel: 'ApiResponse'
models:
  Link:
    id: 'Link'
    description: 'The representation of a link on the stori.es platform'
    required:
       - 'id'
       - 'title'
       - 'permalink'
       - 'entity_id'
    properties:
      id:
        type: 'string'
        description: 'The unique ID for this entity'
      title:
        type: 'string'
        description: 'The title of this document'
      permalink:
        type: 'string'
        description: 'The URL of this document'
      entity_id:
        type: 'integer'
        format: 'int64'
        description: 'The entity which this document is associated with'
        minimum: 1
