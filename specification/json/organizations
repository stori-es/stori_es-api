{
  "apiVersion": 1,
  "swaggerVersion": 1.2,
  "basePath": "http://www.stori.es/api/website/listings",
  "description": "contexts containing stori.es objects",
  "resourcePath": "/organizations",
  "produces": [
    "application/vnd.api+json"
  ],
  "consumes": [
    "application/vnd.api+json"
  ],
  "apis": [
    {
      "path": "/organizations",
      "operations": [
        {
          "method": "POST",
          "summary": "Create a new organization",
          "notes": "Creates a new organization and returns it. Declares the resource URL in the <a href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.30\" title=\"HTTP 1.1 Header Fields - Location\">HTTP Location header</a>.",
          "type": "ApiResponse",
          "nickname": "create_organization",
          "parameters": [
            {
              "name": "body",
              "description": "The new organization to be created",
              "required": true,
              "type": "OrganizationPost",
              "paramType": "body"
            }
          ],
          "responseMessages": [
            {
              "code": 201,
              "message": "Resource successfully created",
              "responseModel": "ApiResponse"
            },
            {
              "code": 400,
              "message": "Invalid input",
              "responseModel": "ApiResponse"
            },
            {
              "code": 403,
              "message": "Not authorized to create the requested resource",
              "responseModel": "ApiResponse"
            },
            {
              "code": 503,
              "message": "Service is currently unavailable",
              "responseModel": "ApiResponse"
            }
          ]
        }
      ]
    },
    {
      "path": "/organizations/{organization_id}",
      "operations": [
        {
          "method": "GET",
          "summary": "Retrieve a specific organization",
          "notes": "Returns a specific organization accessible to the current user",
          "type": "ApiResponse",
          "nickname": "get_organization",
          "parameters": [
            {
              "name": "organization_id",
              "description": "The ID of the organization to retrieve",
              "required": true,
              "type": "string",
              "paramType": "path"
            }
          ],
          "responseMessages": [
            {
              "code": 200,
              "message": "Resource successfully retrieved",
              "responseModel": "ApiResponse"
            },
            {
              "code": 403,
              "message": "Not authorized to access the requested resource",
              "responseModel": "ApiResponse"
            },
            {
              "code": 404,
              "message": "Resource not found",
              "responseModel": "ApiResponse"
            },
            {
              "code": 503,
              "message": "Service is currently unavailable",
              "responseModel": "ApiResponse"
            }
          ]
        },
        {
          "method": "DELETE",
          "summary": "Deletes an organization",
          "notes": "Deletes an organization owned by the current user",
          "type": "void",
          "nickname": "delete_organization",
          "parameters": [
            {
              "name": "organization_id",
              "description": "The ID of the organization to delete",
              "required": true,
              "type": "string",
              "paramType": "path"
            }
          ],
          "responseMessages": [
            {
              "code": 204,
              "message": "Resource successfully deleted"
            },
            {
              "code": 403,
              "message": "Not authorized to delete the requested resource",
              "responseModel": "ApiResponse"
            },
            {
              "code": 404,
              "message": "Resource not found",
              "responseModel": "ApiResponse"
            },
            {
              "code": 503,
              "message": "Service is currently unavailable",
              "responseModel": "ApiResponse"
            }
          ]
        },
        {
          "method": "PATCH",
          "summary": "Updates an organization",
          "notes": "Updates an organization administered by the current user",
          "type": "ApiResponse",
          "nickname": "update_organization",
          "consumes": [
            "application/json-patch+json"
          ],
          "parameters": [
            {
              "name": "organization_id",
              "description": "The ID of the organization to update",
              "required": true,
              "type": "string",
              "paramType": "path"
            },
            {
              "name": "body",
              "description": "Requested modifications in JSON Patch format (see <a href=\"http://tools.ietf.org/html/rfc6902\" title=\"RFC6902 - JSON Patch\">RFC6902</a> and <a href=\"http://jsonapi.org/format/#updating-a-document\" title=\"JSON API - Updating a Document (PATCH)\">JSON API</a>)",
              "required": true,
              "type": "PatchOperations",
              "paramType": "body"
            }
          ],
          "responseMessages": [
            {
              "code": 200,
              "message": "Resource successfully updated",
              "responseModel": "ApiResponse"
            },
            {
              "code": 400,
              "message": "Invalid input",
              "responseModel": "ApiResponse"
            },
            {
              "code": 403,
              "message": "Not authorized to update the requested resource",
              "responseModel": "ApiResponse"
            },
            {
              "code": 404,
              "message": "Resource not found",
              "responseModel": "ApiResponse"
            },
            {
              "code": 503,
              "message": "Service is currently unavailable",
              "responseModel": "ApiResponse"
            }
          ]
        }
      ]
    }
  ],
  "models": {
    "Sort": {
      "id": "Sort",
      "description": "Sort order details indexed by resource name",
      "required": [
        "organizations"
      ],
      "properties": {
        "organizations": {
          "type": "array",
          "description": "Sort order for organization resources",
          "uniqueItems": true,
          "items": {
            "type": "string"
          }
        }
      }
    },
    "Navigation": {
      "id": "Navigation",
      "description": "Navigation details for this response",
      "properties": {
        "first": {
          "type": "string",
          "description": "URL for first set of results"
        },
        "prev": {
          "type": "string",
          "description": "URL for previous set of results"
        },
        "next": {
          "type": "string",
          "description": "URL for next set of results"
        },
        "last": {
          "type": "string",
          "description": "URL for last set of results"
        }
      }
    },
    "Pagination": {
      "id": "Pagination",
      "description": "Pagination details for this response",
      "properties": {
        "limit": {
          "type": "integer",
          "format": "int32",
          "description": "Maximum number of results to return (default = 8, maximum = 50)",
          "minimum": 1,
          "maximum": 50,
          "defaultValue": 8
        },
        "offset": {
          "type": "integer",
          "format": "int32",
          "description": "Starting index, 0-based (default = 0)",
          "minimum": 0,
          "defaultValue": 0
        },
        "sort": {
          "$ref": "Sort",
          "description": "Sort order, indexed by resource"
        },
        "navigation": {
          "$ref": "Navigation",
          "description": "Navigation details for this response"
        }
      }
    },
    "Message": {
      "id": "Message",
      "description": "A message generated by a request",
      "required": [
        "summary",
        "message_code"
      ],
      "properties": {
        "target": {
          "type": "string",
          "description": "Target of this message (field, object, etc.)"
        },
        "summary": {
          "type": "string",
          "description": "Message summary"
        },
        "message_code": {
          "type": "string",
          "description": "stori.es internal message code"
        },
        "detail_url": {
          "type": "string",
          "description": "URL for message details"
        }
      }
    },
    "Metadata": {
      "id": "Metadata",
      "description": "Metadata about this response",
      "required": [
        "self",
        "http_code",
        "status"
      ],
      "properties": {
        "self": {
          "type": "string",
          "description": "Full request URL"
        },
        "status": {
          "type": "string",
          "description": "High-level status of response",
          "enum": [
            "success",
            "fail",
            "error"
          ]
        },
        "http_code": {
          "type": "string",
          "description": "HTTP response status code"
        },
        "messages": {
          "type": "array",
          "description": "Array of messages generated by request",
          "items": {
            "$ref": "Message"
          }
        },
        "pagination": {
          "$ref": "Pagination",
          "description": "Pagination details for this response"
        }
      }
    },
    "ResourceLink": {
      "id": "ResourceLink",
      "description": "Metadata describing a resource",
      "required": [
        "href"
      ],
      "properties": {
        "href": {
          "type": "string",
          "description": "The URL of the resource"
        }
      }
    },
    "ResourceLinks": {
      "id": "ResourceLinks",
      "description": "Metadata describing associated resources",
      "required": [
        "themes",
        "default_theme",
        "creator",
        "owner"
      ],
      "properties": {
        "contacts": {
          "type": "array",
          "description": "Metatdata describing contacts associated with this entity",
          "items": {
            "$ref": "ResourceLink"
          }
        },
        "profiles": {
          "type": "array",
          "description": "Metadata describing user profiles associated with this entity",
          "items": {
            "$ref": "ResourceLink"
          }
        },
        "questionnaires": {
          "type": "array",
          "description": "Metadata describing questionnaires associated with this entity",
          "items": {
            "$ref": "ResourceLink"
          }
        },
        "collections": {
          "type": "array",
          "description": "Metadata describing collections associated with this entity",
          "items": {
            "$ref": "ResourceLink"
          }
        },
        "permissions": {
          "type": "array",
          "description": "Metadata describing permission documents associated with this entity",
          "items": {
            "$ref": "ResourceLink"
          }
        },
        "default_permission": {
          "$ref": "ResourceLink",
          "description": "Metadata describing the default permission document associated with this entity"
        },
        "themes": {
          "type": "array",
          "description": "Metadata describing themes associated with this entity",
          "items": {
            "$ref": "ResourceLink"
          }
        },
        "default_theme": {
          "$ref": "ResourceLink",
          "description": "Metadata describing the default theme associated with this entity"
        },
        "notes": {
          "type": "array",
          "description": "Metadata describing note documents associated with this entity",
          "items": {
            "$ref": "ResourceLink"
          }
        },
        "attachments": {
          "type": "array",
          "description": "Metadata describing attachment documents associated with this entity",
          "items": {
            "$ref": "ResourceLink"
          }
        },
        "creator": {
          "$ref": "ResourceLink",
          "description": "Metadata describing the creator of this entity"
        },
        "owner": {
          "$ref": "ResourceLink",
          "description": "Metadata describing the owner of this entity"
        },
        "administrators": {
          "type": "array",
          "description": "Metadata describing the administrators of this entity",
          "items": {
            "$ref": "ResourceLink"
          }
        },
        "curators": {
          "type": "array",
          "description": "Metadata describing the curators of this entity",
          "items": {
            "$ref": "ResourceLink"
          }
        },
        "readers": {
          "type": "array",
          "description": "Metadata describing the readers of this entity",
          "items": {
            "$ref": "ResourceLink"
          }
        }
      }
    },
    "Organization": {
      "id": "Organization",
      "description": "The representation of an organization on the stori.es platform",
      "required": [
        "id",
        "path_segment",
        "name",
        "links",
        "created_on",
        "updated_on"
      ],
      "properties": {
        "id": {
          "type": "string",
          "description": "The unique ID for this entity; format: /organizations/[organization path segment]"
        },
        "path_segment": {
          "type": "string",
          "description": "The URL path segment uniquely identifying this organization; defaults to URL-encoded organization short name; generated if undefined"
        },
        "name": {
          "type": "string",
          "description": "The organization name (maximum 128 characters)",
          "maximum": 128
        },
        "short_name": {
          "type": "string",
          "description": "The short form of the organization name (maximum 15 characters)",
          "maximum": 15
        },
        "links": {
          "$ref": "ResourceLinks",
          "description": "Metadata describing resources associated with this entity"
        },
        "created_on": {
          "type": "string",
          "format": "date-time",
          "description": "The creation date and time for this entity, normalized to UTC (see <a href=\"http://tools.ietf.org/html/rfc3339\" title=\"RFC3339 - Date and Time on the Internet\">RFC3339</a>)"
        },
        "updated_on": {
          "type": "string",
          "format": "date-time",
          "description": "The most recent modification date and time for this entity, normalized to UTC (see <a href=\"http://tools.ietf.org/html/rfc3339\" title=\"RFC3339 - Date and Time on the Internet\">RFC3339</a>)"
        }
      }
    },
    "ApiResponse": {
      "id": "ApiResponse",
      "description": "The standard API response format for the stori.es platform; follows the <a href=\"http://jsonapi.org/\" title=\"JSON API - A standard for building APIs in JSON\">JSON API</a> standard",
      "required": [
        "meta",
        "organizations"
      ],
      "properties": {
        "meta": {
          "$ref": "Metadata",
          "description": "Metadata describing this response"
        },
        "organizations": {
          "type": "array",
          "description": "Array of requested organization resources",
          "items": {
            "$ref": "Organization"
          }
        }
      }
    },
    "OrganizationPost": {
      "id": "OrganizationPost",
      "description": "The representation of a new organization to be added to the stori.es platform",
      "required": [
        "name"
      ],
      "properties": {
        "path_segment": {
          "type": "string",
          "description": "The URL path segment uniquely identifying this organization; defaults to URL-encoded organization short name; generated if undefined"
        },
        "name": {
          "type": "string",
          "description": "The organization name (maximum 128 characters)",
          "maximum": 128
        },
        "short_name": {
          "type": "string",
          "description": "The short form of the organization name (maximum 15 characters)",
          "maximum": 15
        },
        "contact_ids": {
          "type": "array",
          "description": "The IDs of contacts associated with this entity",
          "items": {
            "type": "string"
          }
        },
        "profile_ids": {
          "type": "array",
          "description": "The IDs of user profiles associated with this entity",
          "items": {
            "type": "string"
          }
        },
        "questionnaire_ids": {
          "type": "array",
          "description": "The IDs of questionnaires associated with this entity",
          "items": {
            "type": "string"
          }
        },
        "collection_ids": {
          "type": "array",
          "description": "The IDs of collections associated with this entity",
          "items": {
            "type": "string"
          }
        },
        "permission_ids": {
          "type": "array",
          "description": "The IDs of permission documents associated with this entity",
          "items": {
            "type": "string"
          }
        },
        "default_permission_id": {
          "type": "string",
          "description": "The ID of the default permission document associated with this entity"
        },
        "theme_ids": {
          "type": "array",
          "description": "The IDs of themes associated with this entity",
          "items": {
            "type": "string"
          }
        },
        "default_theme_id": {
          "type": "string",
          "description": "The ID of the default theme associated with this entity"
        },
        "note_ids": {
          "type": "array",
          "description": "The IDs of note documents associated with this entity",
          "items": {
            "type": "string"
          }
        },
        "attachment_ids": {
          "type": "array",
          "description": "The IDs of attachment documents associated with this entity",
          "items": {
            "type": "string"
          }
        },
        "owner_id": {
          "type": "string",
          "description": "The ID of the owner of this entity"
        }
      }
    },
    "PatchOperation": {
      "id": "PatchOperation",
      "description": "A JSON Patch operation (see <a href=\"http://tools.ietf.org/html/rfc6902\" title=\"RFC6902 - JSON Patch\">RFC6902</a> and <a href=\"http://jsonapi.org/format/#updating-a-document\" title=\"JSON API - Updating a Document\">JSON API</a>)",
      "required": [
        "op",
        "path"
      ],
      "properties": {
        "op": {
          "type": "string",
          "description": "The operation to perform",
          "enum": [
            "add",
            "remove",
            "replace",
            "move",
            "copy",
            "test"
          ]
        },
        "path": {
          "type": "string",
          "description": "A JSON Pointer value (see <a href=\"http://tools.ietf.org/html/rfc6901\" title=\"RFC6901 - JSON Pointer\">RFC6901</a>) referencing a location within the target document where the operation is to be performed"
        },
        "value": {
          "type": "string",
          "description": "The value to patch"
        },
        "from": {
          "type": "string",
          "description": "A JSON Pointer value (see <a href=\"http://tools.ietf.org/html/rfc6901\" title=\"RFC6901 - JSON Pointer\">RFC6901</a>) referencing a location within the target document to move or copy"
        }
      }
    },
    "PatchOperations": {
      "id": "PatchOperations",
      "description": "The representation of requested modifications to an entity on the stori.es platform",
      "required": [
        "operations"
      ],
      "properties": {
        "operations": {
          "type": "array",
          "description": "The set of operations composing requested modifications to a target entity",
          "items": {
            "$ref": "PatchOperation"
          }
        }
      }
    }
  }
}